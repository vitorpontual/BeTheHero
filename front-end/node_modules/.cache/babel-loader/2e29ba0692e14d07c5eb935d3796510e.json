{"ast":null,"code":"var _jsxFileName = \"/home/vpguedes/Documents/Projetos/gohero/src/hooks/useCase.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { api } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CaseContext = /*#__PURE__*/createContext({});\nexport function CaseProvider({\n  children\n}) {\n  _s();\n\n  const [incidents, setIncidents] = useState([]);\n  const ongId = localStorage.getItem('ongId');\n  useEffect(() => {\n    api.get('profile', {\n      headers: {\n        Authorization: ongId\n      }\n    }).then(response => {\n      setIncidents(response.data);\n    });\n  }, [ongId]);\n\n  const handlerNewIncident = async (e, data) => {\n    e.preventDefault();\n\n    try {\n      await api.post('incidents', data, {\n        headers: {\n          Autorizaton: ongId\n        }\n      });\n    } catch (error) {\n      alert('Erro ao cadastrar o caso, tente novamente.');\n    }\n  };\n\n  const handlerDelete = async id => {\n    try {\n      await api.delete(`incident/${id}`, {\n        headers: {\n          Authorizatoin: ongId\n        }\n      });\n      const incidentRemove = incidents.filter(incident => incident.id !== id);\n      setIncidents(incidentRemove);\n    } catch (error) {\n      alert('Error ao deleter o caso, tente novamente');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(CaseContext.Provider, {\n    value: {\n      incidents,\n      handlerDelete,\n      handlerNewIncident\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CaseProvider, \"xapd8YmFJVN5W+0NHEYznmGWvas=\");\n\n_c = CaseProvider;\nexport function useCase() {\n  _s2();\n\n  const context = useContext(CaseContext);\n  return context;\n}\n\n_s2(useCase, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"CaseProvider\");","map":{"version":3,"sources":["/home/vpguedes/Documents/Projetos/gohero/src/hooks/useCase.tsx"],"names":["createContext","useContext","useEffect","useState","api","CaseContext","CaseProvider","children","incidents","setIncidents","ongId","localStorage","getItem","get","headers","Authorization","then","response","data","handlerNewIncident","e","preventDefault","post","Autorizaton","error","alert","handlerDelete","id","delete","Authorizatoin","incidentRemove","filter","incident","useCase","context"],"mappings":";;;;AAAA,SAASA,aAAT,EAA8CC,UAA9C,EAA0DC,SAA1D,EAAqEC,QAArE,QAAqF,OAArF;AACA,SAASC,GAAT,QAAoB,iBAApB;;AAwBA,MAAMC,WAAW,gBAAGL,aAAa,CAAkB,EAAlB,CAAjC;AAEA,OAAO,SAASM,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAuD;AAAA;;AAC5D,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAc,EAAd,CAA1C;AAEA,QAAMO,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,GAAG,CAACS,GAAJ,CAAQ,SAAR,EAAmB;AACjBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEL;AADR;AADQ,KAAnB,EAIGM,IAJH,CAIQC,QAAQ,IAAI;AAClBR,MAAAA,YAAY,CAACQ,QAAQ,CAACC,IAAV,CAAZ;AACD,KAND;AAOD,GARQ,EAQN,CAACR,KAAD,CARM,CAAT;;AAUA,QAAMS,kBAAkB,GAAG,OAAOC,CAAP,EAAqBF,IAArB,KAA8C;AACvEE,IAAAA,CAAC,CAACC,cAAF;;AAEA,QAAG;AACD,YAAMjB,GAAG,CAACkB,IAAJ,CAAS,WAAT,EAAsBJ,IAAtB,EAA4B;AAChCJ,QAAAA,OAAO,EAAE;AACPS,UAAAA,WAAW,EAAEb;AADN;AADuB,OAA5B,CAAN;AAKD,KAND,CAMC,OAAMc,KAAN,EAAY;AACXC,MAAAA,KAAK,CAAC,4CAAD,CAAL;AACD;AAEF,GAbD;;AAeA,QAAMC,aAAa,GAAG,MAAOC,EAAP,IAAsB;AAC1C,QAAI;AACF,YAAMvB,GAAG,CAACwB,MAAJ,CAAY,YAAWD,EAAG,EAA1B,EAA6B;AACjCb,QAAAA,OAAO,EAAE;AACPe,UAAAA,aAAa,EAAEnB;AADR;AADwB,OAA7B,CAAN;AAKA,YAAMoB,cAAc,GAAGtB,SAAS,CAACuB,MAAV,CAAiBC,QAAQ,IAAIA,QAAQ,CAACL,EAAT,KAAgBA,EAA7C,CAAvB;AAEAlB,MAAAA,YAAY,CAACqB,cAAD,CAAZ;AACD,KATD,CASE,OAAON,KAAP,EAAc;AACdC,MAAAA,KAAK,CAAC,0CAAD,CAAL;AACD;AACF,GAbD;;AAeA,sBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEjB,MAAAA,SAAF;AAAakB,MAAAA,aAAb;AAA4BP,MAAAA;AAA5B,KAA7B;AAAA,cAAgFZ;AAAhF;AAAA;AAAA;AAAA;AAAA,UADF;AAGD;;GAhDeD,Y;;KAAAA,Y;AAkDhB,OAAO,SAAS2B,OAAT,GAAoC;AAAA;;AACzC,QAAMC,OAAO,GAAGjC,UAAU,CAACI,WAAD,CAA1B;AAEA,SAAO6B,OAAP;AACD;;IAJeD,O","sourcesContent":["import { createContext, FormEvent, ReactNode, useContext, useEffect, useState } from \"react\";\nimport { api } from \"../services/api\";\n\n\ninterface CaseProviderProps {\n  children: ReactNode;\n}\n\ninterface Incidents {\n  id: string;\n  title: string;\n  description: string;\n  value: string;\n\n}\n\ntype IncidentsInput = Pick<Incidents, \"title\" |\"description\" | \"value\">\n\n\ninterface CaseContextData {\n  incidents: Incidents[];\n  handlerNewIncident: (e: FormEvent, data: IncidentsInput) => void;\n  handlerDelete: (id: string) => void;\n}\n\nconst CaseContext = createContext<CaseContextData>({} as CaseContextData);\n\nexport function CaseProvider({ children }: CaseProviderProps) {\n  const [incidents, setIncidents] = useState<Incidents[]>([])\n\n  const ongId = localStorage.getItem('ongId')\n\n  useEffect(() => {\n    api.get('profile', {\n      headers: {\n        Authorization: ongId\n      }\n    }).then(response => {\n      setIncidents(response.data);\n    });\n  }, [ongId]);\n\n  const handlerNewIncident = async (e: FormEvent, data: IncidentsInput) => {\n    e.preventDefault();\n    \n    try{\n      await api.post('incidents', data, {\n        headers: {\n          Autorizaton: ongId\n        }\n      })\n    }catch(error){\n      alert('Erro ao cadastrar o caso, tente novamente.')\n    }\n    \n  }\n\n  const handlerDelete = async (id: string) => {\n    try {\n      await api.delete(`incident/${id}`, {\n        headers: {\n          Authorizatoin: ongId\n        }\n      })\n      const incidentRemove = incidents.filter(incident => incident.id !== id)\n\n      setIncidents(incidentRemove)\n    } catch (error) {\n      alert('Error ao deleter o caso, tente novamente')\n    }\n  }\n\n  return (\n    <CaseContext.Provider value={{ incidents, handlerDelete, handlerNewIncident }}>{children}</CaseContext.Provider>\n  )\n}\n\nexport function useCase(): CaseContextData {\n  const context = useContext(CaseContext);\n\n  return context\n}"]},"metadata":{},"sourceType":"module"}